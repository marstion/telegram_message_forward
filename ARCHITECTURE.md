# Telegram æ¶ˆæ¯è½¬å‘å·¥å…·æ¶æ„è¯´æ˜

## ğŸ—ï¸ æ¶æ„æ¦‚è¿°

æœ¬é¡¹ç›®ä½¿ç”¨äº†ä¸¤ä¸ªä¸åŒçš„ Telegram å®¢æˆ·ç«¯æ¥å®ç°æ¶ˆæ¯è½¬å‘åŠŸèƒ½ï¼š

### 1. Bot å®¢æˆ·ç«¯ (`self.bot`)
```python
self.bot = Client(
    name="extractor_bot",
    api_id=API_ID,
    api_hash=API_HASH,
    bot_token=BOT_TOKEN  # â† å…³é”®ï¼šä½¿ç”¨ Bot Token
)
```
- **ç”¨é€”**ï¼šæ¥æ”¶ç”¨æˆ·æ¶ˆæ¯ï¼Œå‘é€è½¬å‘çš„å†…å®¹
- **æƒé™**ï¼šBot æƒé™ï¼Œåªèƒ½å‘é€åˆ°ä¸Botå¯¹è¯çš„ç”¨æˆ·
- **èº«ä»½**ï¼šæœºå™¨äººè´¦æˆ·

### 2. ç”¨æˆ·å®¢æˆ·ç«¯ (`self.extractor.client`)
```python
self.client = Client(
    name=self.session_name,
    api_id=API_ID,
    api_hash=API_HASH
    # æ³¨æ„ï¼šæ²¡æœ‰ bot_token
)
```
- **ç”¨é€”**ï¼šè·å–å’Œè¯»å–æ¶ˆæ¯å†…å®¹ï¼ˆåŒ…æ‹¬å—é™é¢‘é“ï¼‰
- **æƒé™**ï¼šç”¨æˆ·è´¦æˆ·æƒé™ï¼Œå¯ä»¥è®¿é—®ç”¨æˆ·èƒ½çœ‹åˆ°çš„æ‰€æœ‰å†…å®¹
- **èº«ä»½**ï¼šçœŸå®ç”¨æˆ·è´¦æˆ·

## âš ï¸ å¸¸è§é—®é¢˜ï¼šæ¶ˆæ¯è½¬å‘åˆ° Saved Messages

### é—®é¢˜ç°è±¡
æ¶ˆæ¯è¢«è½¬å‘åˆ°ç”¨æˆ·è´¦æˆ·çš„ "Saved Messages" è€Œä¸æ˜¯BotèŠå¤©ã€‚

### é—®é¢˜åŸå› 
```python
# é”™è¯¯çš„ä»£ç  - ä½¿ç”¨äº†ç”¨æˆ·å®¢æˆ·ç«¯è¿›è¡Œè½¬å‘
await self.extractor.client.copy_message(
    chat_id=chat_id,  # è¿™æ˜¯BotèŠå¤©çš„ID
    from_chat_id=original_message.chat.id,
    message_id=original_message.id
)
```

**ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ**
1. `self.extractor.client` æ˜¯ç”¨æˆ·è´¦æˆ·å®¢æˆ·ç«¯
2. å½“ç”¨æˆ·å®¢æˆ·ç«¯æ‰§è¡Œ `copy_message` æ—¶ï¼Œ`chat_id` è¢«è§£é‡Šä¸ºç”¨æˆ·è´¦æˆ·çš„èŠå¤©
3. å¦‚æœ `chat_id` æ°å¥½ä¸ç”¨æˆ·è‡ªå·±çš„IDç›¸åŒï¼Œæ¶ˆæ¯å°±ä¼šå¤åˆ¶åˆ° Saved Messages

### è§£å†³æ–¹æ¡ˆ
```python
# æ­£ç¡®çš„ä»£ç  - ä½¿ç”¨Botå®¢æˆ·ç«¯è¿›è¡Œè½¬å‘
await self.bot.copy_message(
    chat_id=chat_id,  # Botå®¢æˆ·ç«¯ä¼šæ­£ç¡®å¤„ç†è¿™ä¸ªID
    from_chat_id=original_message.chat.id,
    message_id=original_message.id
)
```

## ğŸ”§ å®¢æˆ·ç«¯ä½¿ç”¨åŸåˆ™

### âœ… æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼

| æ“ä½œ | ä½¿ç”¨çš„å®¢æˆ·ç«¯ | åŸå›  |
|------|-------------|------|
| è·å–æ¶ˆæ¯å†…å®¹ | `self.extractor.client` | ç”¨æˆ·æƒé™å¯ä»¥è®¿é—®æ›´å¤šé¢‘é“ |
| ä¸‹è½½åª’ä½“æ–‡ä»¶ | `self.extractor.client` | ç”¨æˆ·æƒé™å¯ä»¥ä¸‹è½½å—é™å†…å®¹ |
| å‘é€æ¶ˆæ¯ç»™ç”¨æˆ· | `self.bot` | Botèº«ä»½ï¼Œå‘é€åˆ°æ­£ç¡®çš„èŠå¤© |
| å¤åˆ¶/è½¬å‘æ¶ˆæ¯ | `self.bot` | Botèº«ä»½ï¼Œè½¬å‘åˆ°æ­£ç¡®çš„èŠå¤© |

### âŒ é”™è¯¯çš„ä½¿ç”¨æ–¹å¼

```python
# é”™è¯¯ï¼šä½¿ç”¨ç”¨æˆ·å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯
await self.extractor.client.send_message(chat_id, text)

# é”™è¯¯ï¼šä½¿ç”¨ç”¨æˆ·å®¢æˆ·ç«¯å¤åˆ¶æ¶ˆæ¯
await self.extractor.client.copy_message(chat_id, from_chat_id, message_id)

# é”™è¯¯ï¼šä½¿ç”¨Botå®¢æˆ·ç«¯è·å–å—é™æ¶ˆæ¯ï¼ˆå¯èƒ½å¤±è´¥ï¼‰
await self.bot.get_messages(private_channel_id, message_id)
```

## ğŸ” è°ƒè¯•ä¿¡æ¯

ä¿®å¤åçš„ä»£ç åŒ…å«è¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯ï¼š

```
INFO:å¼€å§‹è½¬å‘æ¶ˆæ¯åˆ°èŠå¤© 123456789
INFO:æ¶ˆæ¯ç±»å‹: text=True, photo=False, video=False
INFO:åŸå§‹æ¶ˆæ¯æ¥æº: chat_id=-1001234567890, message_id=7240
INFO:æ·»åŠ åŸå§‹é“¾æ¥: https://t.me/noticechannel/7240
INFO:ä½¿ç”¨ Bot copy_message è½¬å‘æˆåŠŸ
```

## ğŸš€ æœ€ä½³å®è·µ

1. **æ˜ç¡®å®¢æˆ·ç«¯èŒè´£**ï¼š
   - ç”¨æˆ·å®¢æˆ·ç«¯ï¼šè¯»å–å’Œè·å–
   - Botå®¢æˆ·ç«¯ï¼šå‘é€å’Œè½¬å‘

2. **æ·»åŠ è¯¦ç»†æ—¥å¿—**ï¼š
   - è®°å½•ä½¿ç”¨çš„å®¢æˆ·ç«¯ç±»å‹
   - è®°å½•ç›®æ ‡èŠå¤©ID
   - è®°å½•æ“ä½œç»“æœ

3. **é”™è¯¯å¤„ç†**ï¼š
   - æ¯ä¸ªå®¢æˆ·ç«¯æ“ä½œéƒ½è¦æœ‰å¼‚å¸¸å¤„ç†
   - æä¾›é™çº§æ–¹æ¡ˆ

4. **æƒé™æ£€æŸ¥**ï¼š
   - ç¡®ä¿ç”¨æˆ·å®¢æˆ·ç«¯æœ‰æƒé™è®¿é—®æºæ¶ˆæ¯
   - ç¡®ä¿Botæœ‰æƒé™å‘é€åˆ°ç›®æ ‡èŠå¤©
